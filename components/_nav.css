/* ── Prevent scrollbar-gutter shift on page transitions ─────── */
html {
  scrollbar-gutter: stable;
}

/* ── Sidebar layout offset ─────────────────────────────────── */
body {
  margin-left: var(--nav-sidebar-width) !important;
  box-sizing:  border-box !important;
}

/* ── Sidebar shell ─────────────────────────────────────────── */
#ds-nav {
  position:        fixed;
  top:             0;
  left:            0;
  width:           var(--nav-sidebar-width);
  height:          100vh;
  background:      var(--color-bg-primary);
  border-right:    var(--border-width-2xs) solid var(--color-bg-secondary);
  display:         flex;
  flex-direction:  column;
  z-index:         var(--z-index-nav);
  font-family:     var(--font-family);
  overflow:        hidden;
}

/* ── Header ────────────────────────────────────────────────── */
#ds-nav .nav-header {
  padding:       var(--space-md) var(--space-md) var(--space-sm);
  border-bottom: var(--border-width-2xs) solid var(--color-bg-secondary);
  flex-shrink:   0;
}
#ds-nav .nav-logo {
  display:         flex;
  align-items:     center;
  gap:             var(--gap-xs);
  text-decoration: none;
  margin-bottom:   var(--space-sm);
}
#ds-nav .nav-logo img {
  width:   var(--size-icon-lg);
  height:  var(--size-icon-lg);
  display: block;
}
#ds-nav .nav-logo span {
  font-size:      var(--font-size-sm);     /* 12px — rounded from 13px */
  font-weight:    var(--font-weight-semibold);
  color:          var(--color-text-primary);
  letter-spacing: var(--letter-spacing-tight);
}

/* ── Search ────────────────────────────────────────────────── */
#ds-nav .nav-search-wrap {
  position: relative;
}
#ds-nav .nav-search-icon {
  position:       absolute;
  left:           var(--space-xs);
  top:            50%;
  transform:      translateY(-50%);
  width:          14px;
  height:         14px;
  flex-shrink:    0;
  color:          var(--color-text-tertiary);
  pointer-events: none;
}
#ds-nav .nav-search {
  width:         100%;
  height:        var(--height-32);
  padding:       0 var(--space-xs) 0 28px; /* 28px = icon(14px) + gap(14px) */
  border:        var(--border-width-2xs) solid var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  background:    var(--color-bg-muted);
  font-size:     var(--font-size-sm);
  color:         var(--color-text-primary);
  outline:       none;
  box-sizing:    border-box;
  transition:    border-color var(--transition-base), background var(--transition-base);
  font-family:   inherit;
}
#ds-nav .nav-search::placeholder { color: var(--color-text-tertiary); }
#ds-nav .nav-search:focus {
  border-color: var(--color-ai-brand-border);
  background:   var(--color-bg-primary);
}

/* ── Scrollable list ───────────────────────────────────────── */
#ds-nav .nav-body {
  flex:       1;
  overflow-y: auto;
  padding:    var(--space-xs) 0 var(--space-md);
}
#ds-nav .nav-body::-webkit-scrollbar { width: var(--space-2xs); }
#ds-nav .nav-body::-webkit-scrollbar-thumb {
  background:    var(--color-border-primary);
  border-radius: var(--radius-xs);
}

/* ── Category label ────────────────────────────────────────── */
#ds-nav .nav-category {
  padding:        var(--space-xs) var(--space-md) var(--space-2xs);
  font-size:      var(--font-size-xs);
  font-weight:    var(--font-weight-semibold);
  letter-spacing: var(--letter-spacing-widest);
  text-transform: uppercase;
  color:          var(--color-text-tertiary);
}

/* ── Nav item ──────────────────────────────────────────────── */
#ds-nav .nav-item {
  display:         flex;
  flex-direction:  column;
  padding:         var(--space-xs) var(--space-md);  /* rounded from 6px → 8px */
  text-decoration: none;
  cursor:          pointer;
  transition:      background var(--transition-fast);
  border-left:     var(--border-width-xs) solid transparent;
}
#ds-nav .nav-item:hover { background: var(--color-bg-muted); }
#ds-nav .nav-item.active {
  background:        var(--color-ai-blue-subtle);
  border-left-color: var(--color-ai-brand-border);
}
#ds-nav .nav-item-name {
  font-size:   var(--font-size-sm);      /* 12px — rounded from 13px */
  font-weight: var(--font-weight-semibold);
  color:       var(--color-text-primary);
  line-height: var(--line-height-snug);  /* 1.375 — rounded from 1.4 */
}
#ds-nav .nav-item.active .nav-item-name { color: var(--color-ai-brand-text); }
#ds-nav .nav-item-desc {
  font-size:   var(--font-size-xs);      /* 10px — rounded from 11px */
  color:       var(--color-text-tertiary);
  line-height: var(--line-height-snug);  /* 1.375 — rounded from 1.4 */
  margin-top:  var(--margin-1);
}

/* ── Hidden by search ──────────────────────────────────────── */
#ds-nav .nav-item[hidden] { display: none; }

/* ── Footer ────────────────────────────────────────────────── */
#ds-nav .nav-footer {
  padding:        var(--space-xs) var(--space-md);   /* rounded from 10px → 8px */
  border-top:     var(--border-width-2xs) solid var(--color-bg-secondary);
  font-size:      var(--font-size-xs);
  color:          var(--color-text-tertiary);
  flex-shrink:    0;
  letter-spacing: var(--letter-spacing-wide);
}

/* ── Page header — shared across all pages ─────────────────── */
.page-header {
  display:        flex;
  flex-direction: column;
  gap:            0;
}
.page-eyebrow {
  font-size:      11px;
  font-weight:    var(--font-weight-semibold);
  letter-spacing: 0.09em;
  text-transform: uppercase;
  color:          var(--color-text-tertiary);
  margin:         0 0 var(--space-2xs) 0;
}
.page-title {
  font-size:      var(--font-size-2xl);
  font-weight:    var(--font-weight-bold);
  color:          var(--color-text-primary);
  margin:         0 0 var(--space-xs) 0;
  letter-spacing: -0.02em;
}
.page-desc {
  font-size:      var(--font-size-md);
  color:          var(--color-text-secondary);
  margin:         0;
  line-height:    1.5;
}
